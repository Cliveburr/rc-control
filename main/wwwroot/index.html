<!DOCTYPE html><html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Teste um</title><style>body,html{overflow:hidden!important;height:100%;width:100%;margin:0;font-family:Inter,"SF Pro","Segoe UI",Roboto,Oxygen,Ubuntu,"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:large}img{height:80%;width:90%}.speed{align-self:stretch;background-color:#0ff;width:80px}.btn{background-color:#0ff;height:70px;width:70px}.wheels{background-color:#0800ff;height:80px;width:160px}.view0{position:absolute;top:0;margin:10px;height:calc(100% - 20px);width:calc(100% - 20px)}.view1{position:absolute;top:0;margin:20px;height:calc(100% - 40px);width:calc(100% - 40px)}.cols{display:flex}.colsi{display:flex;flex-direction:row-reverse}.rows{display:flex;flex-direction:column}.grow{flex-grow:1}.gap{gap:10px}.m0{margin:10px}.m1{margin:20px}.w100{width:100%}.h100{height:100%}.wh100{width:100%;height:100%}.end{align-self:flex-end}.space-between{justify-content:space-between}.card{display:flex;flex-direction:column;background-color:#d9dadee8;box-shadow:rgba(9,10,12,.1) 0 8px 16px -2px,rgba(9,10,12,.02) 0 0 0 1px;color:#404654;max-width:100%;position:relative;border-radius:8px}.card-header{height:48px;background-color:#d9dade85;box-shadow:rgba(9,10,12,.1) 0 2px 4px 0;box-sizing:border-box;color:#404654;display:flex;font-size:20px;font-weight:600;padding-left:10px;align-items:center}.card-body{display:flex;flex-direction:column;gap:10px;padding:10px;height:100%}input{display:inline-flex;align-items:center;box-shadow:rgba(9,10,12,.05) 0 1px 2px 0 inset;border:1px solid #001adb;border-radius:6px;padding:11px}button{display:flex;align-items:center;justify-content:center;background-color:#00b89c;border:0;box-shadow:rgba(51,51,51,0) 0 1px 2px 0,rgba(51,51,51,0) 0 2px 4px 0;cursor:pointer;height:40px;font-weight:500;padding:16px}.tab-left{display:flex}.tab-left ul{margin:10px;padding:0;display:flex;flex-direction:column;gap:10px}.tab-left li{display:flex;align-items:center;list-style-position:outside;list-style-type:none;list-style-image:none;width:200px;height:30px;background-color:#00f;border-radius:8px;border:1 solid #d9dade85;color:#e3d2d2;font-weight:500;padding:6px}.tab-left>div{flex-grow:1}.tab-item{cursor:pointer;transition:background-color .3s}.tab-item:hover{background-color:#0056b3}.tab-item.active{background-color:#007bff}.tab-content{flex-grow:1;padding:20px}.tab-panel{display:none}.tab-panel.active{display:block}.tab-panel h3{margin-top:0;margin-bottom:20px;color:#404654}.tab-panel label{display:block;margin-bottom:5px;font-weight:500;color:#404654}.tab-panel select{display:inline-flex;align-items:center;box-shadow:rgba(9,10,12,.05) 0 1px 2px 0 inset;border:1px solid #001adb;border-radius:6px;padding:11px;width:100%;margin-bottom:15px}.button-group{margin-top:20px;display:flex;gap:10px}.status-info{background-color:#f8f9fa;border:1px solid #dee2e6;border-radius:6px;padding:15px;margin-bottom:20px;font-family:monospace;font-size:14px}.progress-container{margin-top:20px}.progress-bar{width:100%;height:20px;background-color:#e9ecef;border-radius:10px;overflow:hidden}.progress-fill{height:100%;background-color:#28a745;width:0%;transition:width .3s ease}.progress-container #progressText{text-align:center;margin-top:10px;font-weight:500}</style><script>function makeView(){document.getElementsByTagName("img")[0].src="/video?"+(new Date).getTime()}class ViewInst{constructor(e,t){this.parentCtx=t,this.html=e.cloneNode(!0),this.ctx={}}setOnclick(e,t){this.html.querySelector("#"+e).onclick=t}close(){document.body.removeChild(this.html)}}class View{constructor(e,t){this.ctr=t,this.template=document.getElementById(e),document.body.removeChild(this.template)}show(e){e=new ViewInst(this.template,e);return this.ctr&&this.ctr(e),document.body.appendChild(e.html),e}}function mainCtr(e){e.setOnclick("btnConfiguration",()=>{views.configurationView.show()})}function netCtr(e){let o=e.html.querySelectorAll(".tab-item"),i=e.html.querySelectorAll(".tab-panel");o.forEach(t=>{t.addEventListener("click",()=>{o.forEach(e=>e.classList.remove("active")),i.forEach(e=>e.classList.remove("active")),t.classList.add("active");var e=t.id.replace("tab","tab")+"Content";document.getElementById(e).classList.add("active")})}),e.html.querySelector("#tabOTA").addEventListener("click",loadOTAStatus),e.html.querySelector("#saveWifiConfig").addEventListener("click",saveWifiConfig),e.html.querySelector("#uploadOTA").addEventListener("click",uploadOTAFirmware)}async function loadOTAStatus(){try{var e=await(await fetch("/ota/status")).json();document.getElementById("otaStatus").innerHTML=`
            <strong>Partição em execução:</strong> ${e.running_partition}<br>
            <strong>Partição de boot:</strong> ${e.boot_partition}<br>
            <strong>OTA em progresso:</strong> ${e.ota_in_progress?"Sim":"Não"}
        `}catch(e){console.error("Erro ao carregar status OTA:",e),document.getElementById("otaStatus").innerHTML="Erro ao carregar informações do sistema."}}function saveWifiConfig(){var e=document.getElementById("wifiSsid").value,t=document.getElementById("wifiPassword").value;e?(alert("Configuração WiFi salva com sucesso!"),console.log("WiFi Config:",{ssid:e,password:t})):alert("Por favor, insira o nome da rede WiFi")}async function uploadOTAFirmware(){let a=document.getElementById("otaFile");var r=a.files[0];if(r)if(r.name.endsWith(".bin")){let t=document.getElementById("otaProgress"),o=document.getElementById("progressBar"),i=document.getElementById("progressText"),n=document.getElementById("uploadOTA");t.style.display="block",n.disabled=!0,n.textContent="Enviando...";try{(new FormData).append("firmware",r);let e=new XMLHttpRequest;e.upload.addEventListener("progress",e=>{e.lengthComputable&&(e=e.loaded/e.total*100,o.style.width=e+"%",i.textContent=Math.round(e)+"%")}),e.onload=function(){if(200===e.status)try{JSON.parse(e.responseText);alert("Firmware enviado com sucesso! O dispositivo será reiniciado."),a.value="",t.style.display="none"}catch(e){alert("Firmware enviado com sucesso! O dispositivo será reiniciado.")}else alert("Erro no upload: "+e.responseText);n.disabled=!1,n.textContent="Atualizar Firmware",t.style.display="none"},e.onerror=function(){alert("Erro na conexão durante o upload"),n.disabled=!1,n.textContent="Atualizar Firmware",t.style.display="none"},e.open("POST","/ota/upload"),e.send(r)}catch(e){console.error("Erro no upload OTA:",e),alert("Erro ao enviar firmware"),n.disabled=!1,n.textContent="Atualizar Firmware",t.style.display="none"}}else alert("Por favor, selecione um arquivo .bin válido");else alert("Por favor, selecione um arquivo .bin")}let views={};function main(){views.mainView=new View("mainView",mainCtr),views.configurationView=new View("configurationView",netCtr),views.mainView.show()}window.onload=main</script></head><body><div id=mainView class="gap cols view0"><div class=speed></div><div class="gap grow rows space-between"><div class="gap cols"><div id=btnConfiguration class=btn></div><div class=btn></div></div><div class=colsi><div class=wheels></div></div></div></div><div id=configurationView class="panel view1"><div class="card wh100"><header class=card-header>Configuração</header><div class=card-body><div class=tab-left><ul><li id=tabGeneral class="tab-item active">General</li><li id=tabWifi class=tab-item>Wifi</li><li id=tabOTA class=tab-item>OTA</li></ul><div class=tab-content><div id=tabGeneralContent class="tab-panel active"><h3>Configuração Geral</h3><label>Tipo de Conexão:</label> <select id=connectionType><option value=wifi>WiFi</option><option value=bluetooth>Bluetooth</option></select></div><div id=tabWifiContent class=tab-panel><h3>Configuração WiFi</h3><label>Nome do WiFi (SSID):</label> <input id=wifiSsid type=text placeholder="Nome da rede WiFi"> <label>Senha do WiFi:</label> <input id=wifiPassword type=password placeholder="Senha da rede WiFi"><div class=button-group><button id=saveWifiConfig>Gravar</button></div></div><div id=tabOTAContent class=tab-panel><h3>Atualização OTA</h3><div id=otaStatus class=status-info>Carregando informações...</div><label>Selecionar arquivo .bin:</label> <input id=otaFile type=file accept=.bin><div class=button-group><button id=uploadOTA>Atualizar Firmware</button></div><div id=otaProgress class=progress-container style=display:none><div class=progress-bar><div id=progressBar class=progress-fill></div></div><div id=progressText>0%</div></div></div></div></div></div></div></div></body></html>